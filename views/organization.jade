extends layout

block content
    section(class="groupOverview")
        if locals.org_image_path
                img(class="orgImage", src= org_image_path)
            else
                img(class="orgImage", src="../images/sample_group_avatar.png")
        h1(class="groupName") #{name}
        a(href="http://localhost:3000/organizations/#{organization_id}/edit") Edit Information
        a(href="http://localhost:3000/events/create?orgId=#{organization_id}") Add Event
    
    section(class="groupInfo")
            p #{description}
            p Created by: #{original_author_id}
            
    section(class="membersSection")
        h4 Members
        if locals.listOfUsers
            each val in listOfUsers
                li
                    a(href="http://localhost:3000/profiles/#{val.user_id}")= val.username
    
    section(class="eventsSection")
        h4 Events
        if locals.listOfEvents
            each val in listOfEvents
                li 
                    a(href="http://localhost:3000/events/#{val.event_id}")= val.title
        else
            p No events posted
    
    section(class="joinLeaveSection")
        if locals.isMember
            a(href="http://localhost:3000/organizations/#{organization_id}/leave") Leave this Organization
        else
            a(href="http://localhost:3000/organizations/#{organization_id}/join") Join this Organization
    
    
    
    //
        DON'T FORGET TO ADD A BUTTON THAT ALLOWS USERS TO BECOME A MEMBER OF AN ORGANIZATION
        Also some logic in the controllers that checks if the user is already a member
        Another also, pass the view a boolean that dictates whether the current user is an admin or not and if not an admin, don't show the last two links
        
        a(href="http://localhost:3000/organizations/#{organization_id}/join") Join Organization
        
        if locals.session.user.userId
            p Found user ID in session
            p= session.user.userId
        
        
        script(href="./public/scripts/join-org.js")